pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- tictactoe1
-- by apa64

-- todo:
-- title screen with instructions
-- 3x3 playing field cell matrix table
-- game state:
--   select_cell
--     --> check_valid
--     --> check_victory
--     --> change_player
--       --> select_cell

-- cells:
-- 16,16 48,16 80,16
-- 16,48 48,48 80,48
-- 16,80 48,80 80,80
-- sprite x: 56,0
-- sprite o: 64,0

cell_width = 32
o_screen_x = 48
o_screen_y = 16
x_screen_x = 16
x_screen_y = 16

function _init()
  selected_x = 1
  selected_y = 1
end

function _update()
  if btnp(0) then
    selected_x = (selected_x - 1) % 3
  end
  if btnp(1) then
    selected_x = (selected_x + 1) % 3
  end
  if btnp(2) then
    selected_y = (selected_y - 1) % 3
  end
  if btnp(3) then
    selected_y = (selected_y + 1) % 3
  end
  selected_screen_x = 16 + selected_x*cell_width
  selected_screen_y = 16 + selected_y*cell_width
  if (btnp(4)) then
    o_screen_x = selected_screen_x
    o_screen_y = selected_screen_y
  end
  if (btnp(5)) then
    x_screen_x = selected_screen_x
    x_screen_y = selected_screen_y
  end
end

function _draw()
  cls(5)
  map(0, 0, 16, 16, 12, 12)
  print("player: x", 48, 7, 7)
  print("wins: x 00 - o 00", 30, 116, 7)
  sspr(56, 0, 8, 8, x_screen_x + 8, x_screen_y + 8, 16, 16)
  sspr(64, 0, 8, 8, o_screen_x + 8, o_screen_y + 8, 16, 16)

  rect(selected_screen_x + 1,selected_screen_y + 1, selected_screen_x + cell_width - 2, selected_screen_y + cell_width - 2, 7)
  
end

function draw_cell(x, y)
  local s = {}
s.cor_x = 8
s.cor_y = 0
s.hor_x = 16
s.hor_y = 0
s.ver_x = 24
s.ver_y = 0

  sspr(s.cor_x, s.cor_y, 8, 8,  0*x,  0*y, 8, 8)
  sspr(s.hor_x, s.hor_y, 8, 8,  8*x,  0, 8, 8)
  sspr(s.cor_x, s.cor_y, 8, 8, 16*x,  0, 8, 8, true)
  sspr(s.ver_x, s.ver_y, 8, 8,  0*x,  8, 8, 8)
  sspr(s.ver_x, s.ver_y, 8, 8, 16*x,  8, 8, 8, true)
  sspr(s.cor_x, s.cor_y, 8, 8,  0*x, 16, 8, 8, false, true)
  sspr(s.hor_x, s.hor_y, 8, 8,  8*x, 16, 8, 8, false, true)
  sspr(s.cor_x, s.cor_y, 8, 8, 16*x, 16, 8, 8, true, true)
end
__gfx__
00000000000000000000000000066000000000000006600000066000700000070077770000000000000000000000000000000000000000000000000000000000
00000000000000000000000000066000000000000006600000066000070000700700007000000000000000000000000000000000000000000000000000000000
00700700000000000000000000066000000000000005650000565000007007007000000700000000000000000000000000000000000000000000000000000000
00077000000005666666666600066000665000000000666666660000000770007000000700000000000000000000000000000000000000000000000000000000
00077000000066666666666600066000666600000000056666500000000770007000000700000000000000000000000000000000000000000000000000000000
00700700000565000000000000066000005650000000000000000000007007007000000700000000000000000000000000000000000000000000000000000000
00000000000660000000000000066000000660000000000000000000070000700700007000000000000000000000000000000000000000000000000000000000
00000000000660000000000000066000000660000000000000000000700000070077770000000000000000000000000000000000000000000000000000000000
__map__
0102020401020204010202040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0300000303000003030000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0300000303000003030000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0502020605020206050202060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102020401020204010202040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0300000303000003030000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0300000303000003030000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0502020605020206050202060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0102020401020204010202040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0300000303000003030000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0300000303000003030000030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0502020605020206050202060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
